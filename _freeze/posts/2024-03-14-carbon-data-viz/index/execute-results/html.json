{
  "hash": "2a3b2b578b1401453b0fdfcedeef461d",
  "result": {
    "markdown": "---\ntitle: 'Carbon Credits Data Visualization'\ndescription: 'Analyzing the Distribution of Carbon Credits between Countries'\nauthor: \"Vanessa Salgado\"\ndate: \"2024-03-11\"\ncode-fold: true \ntoc: true\noutput:\n    html_document:\n      print_df: paged\n      toc: yes\n      toc_depth: 4\n      toc_float: yes\ndraft: false\nfootnotes-hover: true\nformat: \n  html:\n    code-fold: true\n    code-summary: \"View Code\"\n---\n\n\n\n\n## Background and Motivation\n\nThe Paris Agreement of 2015 was an international standard laid out in order to reduce $CO_2$ emissions. With the Paris Aggreement, national emmisions target and regulations sprung up in order to substantially reduce global greenhouse gas emmission to hold global temperature incear to well below 2 C.\n\nWith these new regulations, businesses were pressured to lower their emmissions. Thuse introducing carbon markets with the promise to turn $CO_2$ into a commodity.\n\nCarbon offsetting is a trading mechanism that allows entities such as governments, individuals, or businesses to compensate for their greenhouse gas emissions by supporting projects that reduce, avoid, or remove emissions elsewhere.\n\nTo Put it simply, carbon offsets involve an entity that emits greenhouse gases into the atmosphere paying for another entity to pollute less. For example, an airline in a developed country that wants to claim it is reducing its emissions can pay for a patch of rainforest to be protected in the Amazon.\n\nThe main research question I want to investigate is whether carbon credits are an effective way to measure carbon offset emissions. Each credit purportedly offsets a metric tonne of CO2 emissions, yet the Berkeley Carbon Trading Project reports that, \"research performed by \\[them\\] and others has found that many, if not most, offset credits traded on the market today do not represent real emissions reductions.\" \\[\\[\\^1\\]\\]\n\n## Goal\n\nCombining the Voluntary Registry Offsets Data with another emissions data would be a helpful way to measure if carbon trading/offsets are accurate in measuring emissions.\n\n### Reserach Questions\n\n1.  The main research question is to see : **Are climate credits being distrubuted evenly?**\n\nI will create three separate visualizations that same overall question: How has the Carbon Market grown over the years per country ? and are they keeping up with the global emission reduction goals\n\nEach visualization below has been\n\n## Data\n\n-   *Link to (or otherwise prove the existence of) at least one data set that you plan to use for Assignment #4*\n    -   [Berkeley Voluntary Registry Offsets Database](https://gspp.berkeley.edu/research-and-impact/centers/cepp/projects/berkeley-carbon-trading-project/offsets-database): contains all carbon offset projects, credit issuances, and credit retirements listed globally by four major voluntary offset project registries\n    -   [Data on CO2 and Greenhouse emissions](https://github.com/owid/co2-data) by Our World in Data\n    -   [Raster Data](https://www.naturalearthdata.com/downloads/10m-raster-data/) provided by [Natural Earth](https://www.naturalearthdata.com)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                           library setup                                 ----\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(ggExtra)\nlibrary(gghighlight)\nlibrary(janitor)\nlibrary(naniar)\nlibrary(RColorBrewer)\nlibrary(here)\nlibrary(forcats)\n\nlibrary(showtext)\nfont_add_google(name = \"Merriweather\", family = \"merriweather\")\nfont_add_google(name = \"Karla\", family = \"karla\")\n\nfont_add(family = \"fa-6-brands\",\n         regular = here::here(\"fonts\", \"Font Awesome 6 Brands-Regular-400.otf\"))\nfont_add(family = \"fa-6-regular\",\n         regular = here::here(\"fonts\", \"Font Awesome 6 Free-Regular-400.otf\")) \nfont_add(family = \"fa-6-solid\",\n         regular = here::here(\"fonts\", \"Font Awesome 6 Free-Solid-900.otf\"))\n\nfont_add(family = \"fa-brands\",\n         regular = here::here(\"fonts\", \"fa-brands-400.ttf\"))\nfont_add(family = \"fa-regular\",\n         regular = here::here(\"fonts\", \"fa-regular-400.ttf\")) \nfont_add(family = \"fa-solid\",\n         regular = here::here(\"fonts\", \"fa-solid-900.ttf\"))\n\n\nlibrary(raster)\nlibrary(countrycode)\n\nlibrary(ggtext)\nlibrary(ggrepel)\nlibrary(patchwork)\nlibrary(systemfonts)\n\nlibrary(fmsb)\nlibrary(stringr)\n\nlibrary(emojifont)\nlibrary(NatParksPalettes)\n\nlibrary(waffle)\n```\n:::\n\n\n## Data Wrangling\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                          data cleaning & wrangling                       ----\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\ncarbon_offsets_clean <- carbon_offsets %>%\n  janitor::clean_names(case = \"snake\") %>%\n  replace_with_na_all(condition = ~.x %in% c(-99999, \"#REF!\", \"N/a\", \"N/A\", \"NA\")) %>%\n\n  # change char types to ints or doubles\n  mutate(total_credits_issued = as.numeric(gsub(\",\", \"\", total_credits_issued))) %>%\n  mutate(total_credits_retired = as.numeric(gsub(\",\", \"\", total_credits_retired))) %>%\n  mutate(total_credits_remaining = as.numeric(gsub(\",\", \"\", total_credits_remaining))) %>%\n  mutate(total_buffer_pool_deposits = as.numeric(gsub(\",\", \"\", total_buffer_pool_deposits))) %>%\n  mutate(first_year_of_project = as.factor(gsub(\",\", \"\", first_year_of_project))) %>%\n\n  # remove irregular year columns of the structure 2001...127\n  #select_if(~!any(grepl(\"\\\\d\", .)))\n  dplyr::select(!matches(\"\\\\d\"))\n  # select(-grep(pattern = \"^[0-9]{4}\\\\.\\\\.\\\\.[0-9]{3}$\", names(.), value = TRUE)) %>%\n\nyear_of_offsets <- year_of_offsets %>%\n  rename(year_of_offset = year)\n\ncarbon_offsets_clean_df <- carbon_offsets_clean %>%\n  # join with regular year data\n  full_join(year_of_offsets, by = 'project_name',relationship = \"many-to-many\")\n```\n:::\n\n\nAfter data cleaning, I saved the cleaned dataset so that I would not have to run the cleaning script everytime. Here I simply read in the cleaned version of this `carbon_offsets`dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                          importing data                      ----\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\ncarbon_offsets_clean <- read_csv(here(\"data\",\"carbon_offsets_clean.csv\"))\n\n# color palettes\n\nglacier = c(\"#01353D\", \"#088096\", \"#58B3C7\", \"#7AD4E4\", \"#B8FCFC\")\neverglades = c(\"#345023\", \"#596C0B\", \"#83A102\", \"#003B68\", \"#426F86\", \"#7A712F\")\nigauzufalls = c(\"#415521\", \"#97AD3D\", \"#4C3425\", \"#7F6552\", \"#5A8093\", \"#9FBAD3\")\nolympic = c(\"#3A4330\", \"#426737\", \"#75871B\", \"#BAB97D\", \"#FDE16A\", \"#F9B40E\", \"#E88C23\", \"#A25933\")\n```\n:::\n\n\n# Creating Data Visualizations\n\n### Carbon Credits Remaining versus Carbon Credits Initially Assigned\n\nThis graph is suppose to show the general trend of how Credits Retired and Credits Remaining has changed over time. The Kyoto Protocol in 1997 was the first time that international participation in carbon markets started to become more commonplace. A carbon credit is retired once its benefit has taken place. That means it has been used and the carbon benefit it represents has been claimed by the entity that bought it. We see that there is a bigger proportion of Carbon Credits Retired than Credits Remaining Unused. Meaning the Carbon Credits are working as usual.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                    line plot of credits remaining                        ----\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ncredits_plot <- carbon_offsets_clean %>% \n  group_by(year_of_offset) %>% \n  summarize(credits_retired = sum(total_credits_retired, na.rm = TRUE),\n            credits_remaining = sum(total_credits_remaining, na.rm = TRUE))\n\n# Reshape the data for ggplot\ncredits_plot_long <- tidyr::pivot_longer(credits_plot, \n                                          cols = c(credits_retired, credits_remaining),\n                                          names_to = \"type\", \n                                          values_to = \"credits\")\n\nggplot(credits_plot_long, aes(x = year_of_offset, y = credits, color = type)) +\n  geom_line(size=1) +\n  scale_color_manual(values = c(\"credits_retired\" = \"#95C65CFF\", \"credits_remaining\" = \"#4BA68C\")) +\n  scale_y_continuous(labels = scales::comma) +\n  theme_minimal() +\n  annotate(geom = \"text\", x = 1997, y = 50000000,\n    label = \"1997: Kyoto Protocol-Carbon markets started \\nto become more commonplace\",\n    size = 4, color = \"#232226\", hjust = \"inward\") +\n  annotate(geom = \"text\", x = 2015.25, y = 90000000,\n    label = \"2015: Paris Agreement adopted to\\nsubstantially reduce\\nglobal greenhouse gas\\nemissions which\\ncause global warming\n    \",\n    size = 4, color = \"#232226\", hjust = \"left\") +\n  annotate(geom = \"text\", x = 2022, y = 80000000,\n    label = \"2020: U.S.\\nOfficialy\\nLeaves\\nParis\\nClimate\\nAgreement\",\n    size = 4, color = \"#232226\", hjust = \"left\") +\n  geom_vline(xintercept = 1997.5, \n             linetype = \"dashed\") +\n  geom_vline(xintercept = 2020, \n             linetype = \"dashed\") +\n  geom_vline(xintercept = 2015, \n             linetype = \"dashed\") +\n  scale_x_continuous(expand = c(0, 0)) +\n  labs(x = \"Year of Offset\", y = \"Credits\", color = NULL, \n    title = \"<span style='color:#95C65CFF'>Carbon Credits Retired</span> \\nand <span style='color:#4BA68C'>Carbon Credits Remaining</span> \\nOver Time, 1997 - 2023\", \n       subtitle = \"Carbon credits, also known as carbon offsets, are permits that allow the owner to emit a certain\\namount of carbon dioxide or other greenhouse gases. One credit permits the emission of \\none ton of carbon dioxide or the equivalent in other greenhouse gases.\\nCarbon credit: It is the difference between the carbon emissions allowed and actually emitted carbon\") +\n  theme(\n    plot.title = element_markdown(color = \"#232226\", size = 16, face = \"bold\", family = \"merriweather\"),\n    axis.text.x = element_text(angle = 45, hjust = 1), # Adjust angle and font family here\n    legend.position = \"none\", \n    plot.subtitle = element_text(size = 11, face = \"plain\", color = \"#555459\", family = \"karla\"),\n    plot.caption = element_text(face = \"italic\"),\n    axis.title.x = element_text(color = \"#232226\", size = 10, angle = 0, hjust = .5, vjust = 0, face = \"bold\"),\n    axis.title.y = element_text(color = \"#232226\", size = 10, angle = 90, hjust = .5, vjust = .5, face = \"bold\"),\n    aspect.ratio=3/10)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n### Credits\n\nThis plot shows all of the scopes (major project categories) and how many carbon credits have been used by each project scope. As shown in the plot `Forest & Land Use` and `Renewable Engery`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                          col plot of scopes                         ----\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nscopes <- carbon_offsets_clean %>% \n  mutate(scope = as.factor(scope)) %>% \n  group_by(scope) %>% \n  summarize(total_credits = sum(total_credits_issued, na.rm = TRUE)) %>% \n  filter(total_credits != 0)\n\nscopes_plot <- ggplot(scopes) + \n  #ggalt::geom_lollipop(aes( x = reorder(scope,total_credits),y = total_credits), color = \"#9BB655FF\", size = 1.5) +\n  geom_col(aes( x = reorder(scope,total_credits),y = total_credits), fill = \"#9BB655FF\", size = 1.5) +\n  scale_y_continuous(labels = scales::comma, expand = c(0, 0)) +\n  geom_text(aes(x = reorder(scope, total_credits), y = total_credits, label = total_credits),\n            vjust = 0.7, color = \"#232226\", size = 3, hjust = -.1) +  \n  theme_minimal() +\n  labs(title = \"Total Credits Assigned to each Project Scope\",\n       subtitle = \"Scopes refers to the type of projects that aim to reduce emissions\", \n       x = \"Project Scope Category\" ,\n       y = \"Credits Assigned to each Scope\") +\n  \n  coord_flip() +\n  # Annotate custom scale inside plot\n  theme(\n    plot.title = element_markdown(color = \"#232226\", size = 16, face = \"bold\", family = \"merriweather\", hjust = 0.5),\n        axis.text.x = element_text(angle = 45, hjust = 1, family = \"karla\"), # Adjust angle and font family here\n        axis.text.y = element_text(color = \"black\"),\n        legend.position = \"none\", \n        plot.subtitle = element_text(size = 11, face = \"plain\", color = \"#555459\", family = \"karla\", hjust = 0.5),\n        plot.caption = element_text(face = \"italic\"),\n        axis.title.x = element_text(color = \"black\", size = 10, angle = 0, hjust = .5, vjust = 0, face = \"bold\"),\n        axis.title.y = element_text(color = \"black\", size = 10, angle = 90, hjust = .5, vjust = .5, face = \"bold\"))\n\nscopes_plot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\noptions(scopes_plot.width =6, scopes_plot.height =3)\n```\n:::\n\n\n# Waffle Plot of Credits Issued to Top 7 Countries\n\nI want to investigate which countries are the ones with most carbon credits assigned.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##                    line plot of credits remaining                        ----\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n\n# subsetted and calcu\ncarbon_offsets_clean_issued <- carbon_offsets_clean %>%\n  group_by(country) %>%\n  summarise(total_credits = sum(total_credits_issued, na.rm = TRUE))\n\ntop_7_values <- carbon_offsets_clean_issued %>%\n  top_n(7, total_credits)\n\n# If you want to keep only the rows with the top 10 values:\nfiltered_dataframe <- carbon_offsets_clean_issued %>%\n  filter(total_credits %in% top_7_values$total_credits)\n\n\n\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n##            waffle plot of credits issued to top 7 countries              ----\n##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nggplot(filtered_dataframe, aes(label = country, values = total_credits)) +\n  geom_pictogram(n_rows = 5, aes(colour = country), make_proportional = TRUE, family = \"fa-solid\", size = 7) +\n  coord_equal() +\n  # paletteer::scale_fill_paletteer_d(\"rcartocolor::Earth\") +\n  labs(title = \"Which Country has the most Carbon Credits Issued?\",\n       subtitle = \"TOP 7 Countries who account for the most credits issued since DATE \",\n       caption = \"caption\") +\n  scale_color_manual(\n    name = NULL, \n    values = c(\"#0067A2\", \"#DFCB91\", \"#CB7223\", \"#289A84\", \"#7FA4C2\", \"#AF7E56\", \"#9BB655FF\"),\n    labels = c(\"Brazil\", \"China\", \"India\", \"Indonesia\", \"Peru\", \"Turkey\", \"United States\")) +\n  scale_label_pictogram(\n    name = NULL,\n    values = \"leaf\",\nlabels = c(\"Brazil\", \"China\", \"India\", \"Indonesia\", \"Peru\", \"Turkey\", \"United States\")) +  theme_enhance_waffle() +\n  theme_void() +\n  theme(\n    plot.title = element_markdown(color = \"#232226\", size = 16, face = \"bold\", family = \"merriweather\", hjust = 0.5 ),\n    plot.subtitle = element_text(size = 11, face = \"plain\", color = \"#555459\", family = \"karla\", hjust = 0.5, margin(t = 5, r = 1, b = 5, l = , unit = \"cm\")),\n\n    legend.text = element_text(size = 12),\n    legend.position = \"bottom\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/credits_issued_by_country_proportionally-1.png){width=672}\n:::\n:::\n\n\n## Infographic\n\n![](/images/How are Carbon Credits Distributed?-2.jpg)\n\nPlease look at a better Resolution Photo on my Github Repo : [How are Carbon Credits Distributed Infographic](https://github.com/Vanessa-Salgado/Vanessa-Salgado.github.io/blob/main/images/How%20are%20Carbon%20Credits%20Distributed%3F-2.pdf)\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}